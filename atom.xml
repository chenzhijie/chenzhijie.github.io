<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ChenZhijie</title>
  
  <subtitle>My blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-08-23T02:57:16.796Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>ChenZhijie</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ipfs-p2p-bitswap</title>
    <link href="http://yoursite.com/2018/08/22/ipfs-p2p-bitswap/"/>
    <id>http://yoursite.com/2018/08/22/ipfs-p2p-bitswap/</id>
    <published>2018-08-22T10:49:45.000Z</published>
    <updated>2018-08-23T02:57:16.796Z</updated>
    
    <content type="html"><![CDATA[<h3 id="IPFS-P2P网络原理-以及-Bitswap的数据交互流程"><a href="#IPFS-P2P网络原理-以及-Bitswap的数据交互流程" class="headerlink" title="IPFS P2P网络原理 以及 Bitswap的数据交互流程"></a>IPFS P2P网络原理 以及 Bitswap的数据交互流程</h3><p>首先IPFS执行初始化， 先配置 <code>IPFS_PATH</code> </p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ export IPFS_PATH = $PWD</span><br></pre></td></tr></table></figure><p>初始化</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ipfs init</span><br></pre></td></tr></table></figure><p>IPFS初始化时会在本地生成一个默认的 <code>config</code> 文件</p><p>这个config文件会有一些ip和端口的配置，配置的就是本地的 <code>host</code></p><p>然后在 <code>builder.go</code> 文件里的 <code>setupNode</code> 函数会调用 <code>startOnlineServices</code> 将配置文件中的相关信息传参，从而建立IPFS <code>host</code></p><p><code>bitswap</code>  是一个数据块交互的网络实现， 每个IPFS节点有一个bitswap网络。 通过<code>wantmanager</code>进行管理, 而<code>wantmanager</code> 里面又实现了队列机制。 如果队列有消息需要发送的话，首先判断<code>msgQueue</code> 的<code>sender</code>是否为nil，则会先建立连接，生成一个 <code>sender</code> 然后发送数据。</p><p><code>bitswap</code> 的一些操作命令，基本都是查看数据交互过程的一些数据信息展示， 实际操作主要还是利用到 <code>block get</code> 等相关命令</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;IPFS-P2P网络原理-以及-Bitswap的数据交互流程&quot;&gt;&lt;a href=&quot;#IPFS-P2P网络原理-以及-Bitswap的数据交互流程&quot; class=&quot;headerlink&quot; title=&quot;IPFS P2P网络原理 以及 Bitswap的数据交互流程&quot;&gt;
      
    
    </summary>
    
    
      <category term="ipfs" scheme="http://yoursite.com/tags/ipfs/"/>
    
  </entry>
  
</feed>
